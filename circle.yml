machine:
  node:
    version: 6

dependencies:
  cache_directories:
    - nativescript-vue/node_modules

  override:
    - cd nativescript-vue && npm install && npm install codecov

general:
  artifacts:
    - nativescript-vue/coverage

test:
  override:
    - cd nativescript-vue && npm run test
    - cat ./nativescript-vue/coverage/lcov.info | ./node_modules/.bin/codecov
    - mv ./nativescript-vue/junit.xml $CIRCLE_TEST_REPORTS/reports
